<div class="project-board-container">
  <!-- Project Board Header with Navigation Tabs -->
  <div class="board-header bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
    <div class="tab-navigation overflow-x-auto">
      <div class="flex">
        <button *ngFor="let tab of tabs; let i = index"
                (click)="setActiveTab(i)"
                (mouseenter)="hoveredTabIndex = i"
                (mouseleave)="hoveredTabIndex = -1"
                class="tab-button"
                [class.active-tab]="activeTabIndex === i"
                [class.hover-tab]="hoveredTabIndex === i && activeTabIndex !== i">
          <span class="tab-text">{{ tab }}</span>
        </button>
      </div>
    </div>

    <!-- Board View Options (only visible on Tasks tab) -->
    <div *ngIf="activeTabIndex === 1" class="view-options">
      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500 dark:text-gray-400 hidden sm:inline">View:</span>
        <div class="flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
          <button *ngFor="let view of views; let i = index" 
                  (click)="setActiveView(i)"
                  (mouseenter)="hoveredViewIndex = i"
                  (mouseleave)="hoveredViewIndex = -1"
                  class="view-button"
                  [class.active-view]="activeViewIndex === i"
                  [class.hover-view]="hoveredViewIndex === i && activeViewIndex !== i">
            <span class="view-icon">{{ viewIcons[i] }}</span>
            <span class="view-text">{{ view }}</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Content Area -->
  <div class="board-content">
    <!-- Overview Tab Content - Now shown by default -->
    <div *ngIf="activeTabIndex === 0" [@fadeInUp]>
      <app-overview-section></app-overview-section>
    </div>

    <!-- Tasks Tab Content -->
    <div *ngIf="activeTabIndex === 1" class="board-container" [class.mobile-board]="isMobileView">
      <!-- Task columns display for Board view -->
      <div class="board-columns" 
           [@staggerIn]="taskColumns.length" 
           [class.with-details]="selectedTaskId !== null && !isMobileView"
           [class.board-columns-mobile]="isMobileView"
           [class.board-columns-responsive]="!isMobileView">
        <div *ngFor="let column of taskColumns; let colIndex = index" 
             class="board-column" 
             [@scaleIn]
             [class.compact-view]="isCompactView"
             [class.board-column-mobile]="isMobileView"
             [class.board-column-responsive]="!isMobileView">
          <div class="column-header">
            <div class="column-title">
              <div class="status-indicator" [style.backgroundColor]="column.color"></div>
              <h3>{{ column.name }}</h3>
              <span class="task-count">{{ column.count }}</span>
            </div>
            <button class="add-task-button" (click)="openTaskCreate(column.name)">+</button>
          </div>
          
          <div class="task-list" [class.no-scroll-mobile]="isMobileView">
            <app-task-card *ngFor="let task of column.tasks; let taskIndex = index" 
                         [task]="task" 
                         [style.animationDelay]="(colIndex * 100 + taskIndex * 50) + 'ms'"
                         (viewDetailsEvent)="onViewTaskDetails($event)"
                         class="task-card-animation"></app-task-card>
          </div>
        </div>
      </div>
      
      <!-- Task Details Panel for Desktop -->
      <app-task-details 
        *ngIf="selectedTaskId !== null && !isMobileView" 
        [taskId]="selectedTaskId"
        [task]="getSelectedTask()"
        (closePanel)="closeTaskDetails()"
        [@slideInRight]
        class="task-details-panel">
      </app-task-details>
    </div>

    <!-- Notes Tab Content -->
    <div *ngIf="activeTabIndex === 2" [@fadeInUp]>
      <app-notes-section></app-notes-section>
    </div>

    <!-- Questions Tab Content -->
    <div *ngIf="activeTabIndex === 3" [@fadeInUp]>
      <app-questions-section></app-questions-section>
    </div>
  </div>

  <!-- Task Create Modal -->
  <div *ngIf="showTaskCreate" class="modal-overlay">
    <div class="modal-container">
      <app-task-create (saveTask)="handleTaskSave($event)" (cancel)="showTaskCreate = false"></app-task-create>
    </div>
  </div>

  <!-- Task Details Modal for Mobile -->
  <div 
    *ngIf="selectedTaskId !== null && isMobileView" 
    class="mobile-task-modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
    [@fadeInUp]>
    <div class="mobile-task-modal-content bg-white dark:bg-gray-800 w-full h-full max-h-full overflow-auto rounded-t-xl">
      <app-task-details 
        [taskId]="selectedTaskId"
        [task]="getSelectedTask()"
        (closePanel)="closeTaskDetails()"
        class="w-full h-full">
      </app-task-details>
    </div>
  </div>
</div>
